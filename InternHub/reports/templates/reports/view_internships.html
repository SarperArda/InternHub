{% extends 'base.html' %}
{% load static %}
{% load permissions %}

{% block title %}Internships{% endblock %}

{% block styling %}
    <link rel="stylesheet" type="text/css" href="">
{% endblock %}

{% block body %}
    {% for internship in internships %}
    <div>
        {% if request.user.role != 'STUDENT' %}
            <p>Student Name: {{ internship.student.first_name }} {{ internship.student.last_name }}</p>
        {% endif %}
        {% if request.user.role != 'INSTRUCTOR'%}
            <p>Instructor Name: {{ internship.instructor.first_name }} {{ internship.instructor.last_name }}</p>
        {% endif %}
        <p>Company Name: {{ internship.company.name }}</p>
        <p>Course: {{ internship.course }}</p>
        <p>Status: {{ internship.get_status_display }}</p>


        {% if request.user.role == 'STUDENT' %}
                {% if internship.company_evaluation %}
                <p>Your Evaluation to Company: {{ internship.company_evaluation.grade }}</p>
            {% else %}
                <p>You have not evaluated this company.</p>
            {% endif %}
            <a href="{% url 'company:evaluate-company' internship.pk %}"><button type="submit" name="action" value="detail">Evaluate Company</button></a>
        {% endif %}

        {% if request.user|can_submit_feedback%}
            <a href="{% url 'reports:submit_feedback' internship.id%}"><button type="submit" name="action" value="feedback">Give Feedback</button></a>
            <a href="{% url 'reports:internship_detail' internship.id%}"><button type="submit" name="action" value="detail">Detail</button></a>
            <a href=""><button type="submit" name="action" value="submission">View Submissions</button></a>
        {% endif %}
    </div>
    {% endfor %}

    {% if request.user.role == 'INSTRUCTOR'%}
        <h2>Set Extension For All Submissions</h2>
        <form method="post">
            {% csrf_token %}
            {{ form.as_p }}
            <button type="submit">Set Due Date</button>
        </form>
    {% endif %}
{% endblock %}